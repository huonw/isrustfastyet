Refactor ty_str to use a ~(str) representation.